!function(e){function o(r){if(t[r])return t[r].exports;var n=t[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}var t={};return o.m=e,o.c=t,o.p="",o(0)}([function(e,o,t){"use strict";t(1);var r="mi.ColorPicker",n=["colorpicker.module"];e.exports=angular.module(r,n).run(["formlyConfig",function(e){function o(e){return e=e.replace(/[\-_\s]+(.)?/g,function(e,o){return o?o.toUpperCase():""}),e.replace(/^([A-Z])/,function(e,o){return o?o.toLowerCase():""})}var t={};t={},angular.forEach(["color-picker-format","color-picker-alpha","color-picker-swatch","color-picker-swatch-pos","color-picker-swatch-bootstrap","color-picker-swatch-only","color-picker-pos","color-picker-case"],function(e){t[o(e)]={attribute:e}}),e.setType({name:"colorpicker",template:'<div class="input-group"><input type="text" colorpicker class="form-control" colorpicker-position="top" ng-model="model[options.key]" aria-describedby="basic-addon2"><span class="input-group-addon mi-color-picker" style="background-color:{{model.backgroundColor}}" id="basic-addon2"></span></div>',wrapper:["bootstrapLabel","bootstrapHasError"],defaultOptions:{ngModelAttrs:t}})}])},function(e,o){angular.module("colorpicker.module",[]).factory("Helper",function(){"use strict";return{closestSlider:function(e){var o=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return o.bind(e)("I")?e.parentNode:e},getOffset:function(e,o){for(var t=0,r=0,n=e.getBoundingClientRect();e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)o||"BODY"!==e.tagName?(t+=e.scrollLeft,r+=e.scrollTop):(t+=document.documentElement.scrollLeft||e.scrollLeft,r+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:n.top+window.pageYOffset,left:n.left+window.pageXOffset,scrollX:t,scrollY:r}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){"use strict";return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,o,t,r){e/=255,o/=255,t/=255;var n,i,c,l;return c=Math.max(e,o,t),l=c-Math.min(e,o,t),n=0===l?null:c===e?(o-t)/l:c===o?(t-e)/l+2:(e-o)/l+4,n=(n+360)%6*60/360,i=0===l?0:l/c,{h:n||1,s:i,b:c,a:r||1}},setColor:function(o){o=o?o.toLowerCase():o;for(var t in e.stringParsers)if(e.stringParsers.hasOwnProperty(t)){var r=e.stringParsers[t],n=r.re.exec(o),i=n&&r.parse(n);if(i)return this.value=this.RGBtoHSB.apply(null,i),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,o,t,r){e||(e=this.value.h,o=this.value.s,t=this.value.b),e*=360;var n,i,c,l,s;return e=e%360/60,s=t*o,l=s*(1-Math.abs(e%2-1)),n=i=c=t-s,e=~~e,n+=[s,l,0,0,l,s][e],i+=[l,s,s,l,0,0][e],c+=[0,0,l,s,s,l][e],{r:Math.round(255*n),g:Math.round(255*i),b:Math.round(255*c),a:r||this.value.a}},toHex:function(e,o,t,r){var n=this.toRGB(e,o,t,r);return"#"+(1<<24|parseInt(n.r,10)<<16|parseInt(n.g,10)<<8|parseInt(n.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(e){"use strict";var o={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},t={};return{getSlider:function(){return o},getLeftPosition:function(e){return Math.max(0,Math.min(o.maxLeft,o.left+((e.pageX||t.left)-t.left)))},getTopPosition:function(e){return Math.max(0,Math.min(o.maxTop,o.top+((e.pageY||t.top)-t.top)))},setSlider:function(r,n){var i=e.closestSlider(r.target),c=e.getOffset(i,n),l=i.getBoundingClientRect(),s=r.clientX-l.left,a=r.clientY-l.top;o.knob=i.children[0].style,o.left=r.pageX-c.left-window.pageXOffset+c.scrollX,o.top=r.pageY-c.top-window.pageYOffset+c.scrollY,t={left:r.pageX-(s-o.left),top:r.pageY-(a-o.top)}},setSaturation:function(e,t,r){o={maxLeft:r,maxTop:r,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,t)},setHue:function(e,t,r){o={maxLeft:0,maxTop:r,callLeft:!1,callTop:"setHue"},this.setSlider(e,t)},setAlpha:function(e,t,r){o={maxLeft:0,maxTop:r,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,t)},setKnob:function(e,t){o.knob.top=e+"px",o.knob.left=t+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(e,o,t,r,n){"use strict";return{require:"?ngModel",restrict:"A",link:function(i,c,l,s){function a(){e.on("mousemove",u),e.on("mouseup",f)}function p(){try{D.css("backgroundColor",M[w]())}catch(e){D.css("backgroundColor",M.toHex())}B.css("backgroundColor",M.toHex(M.value.h,1,1,1)),"rgba"===w&&(x.css.backgroundColor=M.toHex())}function u(e){var o=r.getLeftPosition(e),t=r.getTopPosition(e),n=r.getSlider();r.setKnob(t,o),n.callLeft&&M[n.callLeft].call(M,o/P),n.callTop&&M[n.callTop].call(M,t/P),p();var l=M[w]();return c.val(l),s&&i.$apply(s.$setViewValue(l)),L&&F.val(l),!1}function f(){m("colorpicker-selected"),e.off("mousemove",u),e.off("mouseup",f)}function d(e){M.setColor(c.val()),L&&!e&&F.val(c.val()),Y.eq(0).css({left:M.value.s*P+"px",top:P-M.value.b*P+"px"}),Y.eq(1).css("top",P*(1-M.value.h)+"px"),Y.eq(2).css("top",P*(1-M.value.a)+"px"),p()}function h(){var e,o=n.getOffset(c[0]);return angular.isDefined(l.colorpickerParent)&&(o.left=0,o.top=0),"top"===C?e={top:o.top-147,left:o.left}:"right"===C?e={top:o.top,left:o.left+126}:"bottom"===C?e={top:o.top+c[0].offsetHeight+2,left:o.left}:"left"===C&&(e={top:o.top,left:o.left-150}),{top:e.top+"px",left:e.left+"px"}}function k(){v()}function g(){O.hasClass("colorpicker-visible")||(d(),O.addClass("colorpicker-visible").css(h()),m("colorpicker-shown"),S===!1&&e.on("mousedown",k),l.colorpickerIsOpen&&(i[l.colorpickerIsOpen]=!0,i.$$phase||i.$digest()))}function m(e){s&&i.$emit(e,{name:l.ngModel,value:s.$modelValue})}function v(){O.hasClass("colorpicker-visible")&&(O.removeClass("colorpicker-visible"),m("colorpicker-closed"),e.off("mousedown",k),l.colorpickerIsOpen&&(i[l.colorpickerIsOpen]=!1,i.$$phase||i.$digest()))}var b,x,w=l.colorpicker?l.colorpicker:"hex",C=angular.isDefined(l.colorpickerPosition)?l.colorpickerPosition:"bottom",S=!!angular.isDefined(l.colorpickerInline)&&l.colorpickerInline,y=!!angular.isDefined(l.colorpickerFixedPosition)&&l.colorpickerFixedPosition,I=angular.isDefined(l.colorpickerParent)?c.parent():angular.element(document.body),L=!!angular.isDefined(l.colorpickerWithInput)&&l.colorpickerWithInput,P=angular.isDefined(l.colorpickerSize)?l.colorpickerSize:100,b=P+"px",$=L?'<input type="text" name="colorpicker-input" spellcheck="false">':"",H=S?"":'<button type="button" class="close close-colorpicker">&times;</button>',T='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+$+H+"</div></div>",O=angular.element(T),M=t,A=O.find("colorpicker-hue"),B=O.find("colorpicker-saturation"),D=O.find("colorpicker-preview"),Y=O.find("i");if(o(O)(i),O.css("min-width",parseInt(P)+29+"px"),B.css({width:b,height:b}),A.css("height",b),L){var F=O.find("input");F.css("width",b),F.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(){var e=this.value;c.val(e),s&&s.$modelValue!==e&&(i.$apply(s.$setViewValue(e)),d(!0))})}"rgba"===w&&(O.addClass("alpha"),x=O.find("colorpicker-alpha"),x.css("height",b),x.on("click",function(e){r.setAlpha(e,y,P),u(e)}).on("mousedown",function(e){r.setAlpha(e,y,P),a()}).on("mouseup",function(e){m("colorpicker-selected-alpha")})),A.on("click",function(e){r.setHue(e,y,P),u(e)}).on("mousedown",function(e){r.setHue(e,y,P),a()}).on("mouseup",function(e){m("colorpicker-selected-hue")}),B.on("click",function(e){r.setSaturation(e,y,P),u(e),angular.isDefined(l.colorpickerCloseOnSelect)&&v()}).on("mousedown",function(e){r.setSaturation(e,y,P),a()}).on("mouseup",function(e){m("colorpicker-selected-saturation")}),y&&O.addClass("colorpicker-fixed-position"),O.addClass("colorpicker-position-"+C),"true"===S&&O.addClass("colorpicker-inline"),I.append(O),s&&(s.$render=function(){c.val(s.$viewValue),d()}),c.on("blur keyup change",function(){d()}),c.on("$destroy",function(){O.remove()}),S===!1?c.on("click",g):g(),O.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),O.find("button").on("click",function(){v()}),l.colorpickerIsOpen&&i.$watch(l.colorpickerIsOpen,function(e){e===!0?g():e===!1&&v()})}}}])}]);